<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epcot Favorite Rides</title>
    <style>
        .wait { color: black; }
        .short-wait { color: green; font-weight: bold; }
        .long-wait { color: red; }
    </style>
</head>
<body>
    <h1>Epcot Favorite Rides</h1>
    <ul id="rides-list"></ul>

    <script>
        const favorites = [
            "Millennium Falcon: Smugglers Run",
            "Mickey & Minnie's Runaway Railway",
            "The Twilight Zone Tower of Terrorâ„¢",
            "Toy Story Mania!",
            "Slinky Dog Dash",
            "Rock 'n' Roller Coaster Starring Aerosmith",
            "Star Wars: Rise of the Resistance"
        ];

        const targetUrl = 'https://api.themeparks.wiki/v1/entity/288747d1-8b4f-4a64-867e-ea7c9b27bad8/live';

        fetch(targetUrl)
            .then(response => response.json())
            .then(data => {
                const myRides = [];
                const ridesList = document.getElementById('rides-list');

                data.liveData.forEach(ride => {
                    if (favorites.includes(ride.name)) {
                        myRides.push(ride);
                    }
                });

                myRides.forEach(ride => {
                    if (ride.status === "OPERATING") {
                        const listItem = document.createElement('li');
                        const nameSpan = document.createElement('span');
                        const waitSpan = document.createElement('span');

                        nameSpan.textContent = ride.name;
                        
                        if (ride.queue && ride.queue.STANDBY) {
                            const waitTime = ride.queue.STANDBY.waitTime;

                            waitSpan.textContent = ` - ${waitTime} min`;
                            if (waitTime <= 30) {
                                nameSpan.className = 'short-wait';
                            } else if (waitTime >= 60) {
                                nameSpan.className = 'long-wait';
                            }
                        } else {
                            waitSpan.textContent = ` - No wait time available`;
                        }

                        waitSpan.className = 'wait';

                        listItem.appendChild(nameSpan);
                        listItem.appendChild(waitSpan);
                        ridesList.appendChild(listItem);
                    }
                });
            })
            .catch(error => console.error('Error fetching the data:', error));
    </script>
</body>
</html>